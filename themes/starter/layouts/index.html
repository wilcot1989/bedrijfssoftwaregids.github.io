{{ define "main" }}

{{/* ===== 1. HERO ===== */}}
<div class="hero">
  <div class="container wide">
    <h1>De juiste software voor jouw bedrijf. Zonder verkooppraatjes.</h1>
    <p>Ik test zakelijke software hands-on en vergelijk op prijs, gebruiksgemak en support. Eerlijk advies voor Nederlandse ondernemers.</p>
    <div class="trust-strip">
      {{ $totalArticles := len (where .Site.RegularPages "Type" "posts") }}
      <span class="trust-item">{{ $totalArticles }}+ reviews</span>
      <span class="trust-item">{{ len .Site.Taxonomies.categories }} categorieÃ«n</span>
      <span class="trust-item">100% onafhankelijk</span>
    </div>
  </div>
</div>

{{/* ===== 2. CATEGORIE GRID ===== */}}
<div class="section section-warm">
  <div class="container wide">
    <div class="section-title">
      <h2>Alle categorieÃ«n</h2>
      <p>Kies een categorie om vergelijkingen en reviews te bekijken.</p>
    </div>
    <div class="cat-grid">
      {{ $catIcons := dict "kassasystemen" "ğŸª" "crm" "ğŸ¤" "boekhouding" "ğŸ“Š" "projectmanagement" "ğŸ“‹" "hr-software" "ğŸ‘¥" "marketing" "ğŸ“£" "productiviteit" "âš¡" "webshops" "ğŸ›’" "klantenservice" "ğŸ’¬" }}
      {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
        {{ $icon := index $catIcons $name }}
        {{ if not $icon }}{{ $icon = "ğŸ“" }}{{ end }}
        <a href="/categories/{{ $name }}/" class="cat-card">
          <span class="cat-icon">{{ $icon }}</span>
          <span class="cat-name">{{ $name | humanize | title }}</span>
          <span class="cat-count">{{ len $taxonomy }} {{ if eq (len $taxonomy) 1 }}artikel{{ else }}artikelen{{ end }}</span>
        </a>
      {{ end }}
    </div>
  </div>
</div>

{{/* ===== 3. POPULAIRE VERGELIJKINGEN ===== */}}
{{ $allPosts := where .Site.RegularPages "Type" "posts" }}
{{ $popularPosts := first 4 $allPosts }}
{{ if $popularPosts }}
<div class="section">
  <div class="container wide">
    <div class="section-title">
      <h2>Populaire vergelijkingen</h2>
    </div>
    <div class="popular-grid">
      {{ range $popularPosts }}
      {{ $pageTitle := .Title }}
      <div class="card">
        {{ with .Params.featured_image }}<img src="{{ . }}" alt="{{ $pageTitle }}" class="card-thumb" loading="lazy" decoding="async">{{ end }}
        {{ with .Params.categories }}{{ range first 1 . }}<a href="/categories/{{ . }}/" class="card-category">{{ . | humanize | title }}</a>{{ end }}{{ end }}
        <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
        <div class="meta">{{ .Date.Format "02-01-2006" }} Â· {{ .ReadingTime }} min leestijd</div>
        <p style="color:#64748b;font-size:0.92rem;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;">{{ .Summary }}</p>
        <a href="{{ .RelPermalink }}" class="read-more">Lees meer â†’</a>
      </div>
      {{ end }}
    </div>
  </div>
</div>
{{ end }}

{{/* ===== 4. METHODIEK ===== */}}
<div class="section section-dark">
  <div class="container wide">
    <div class="section-title">
      <h2>Hoe ik software test</h2>
    </div>
    <div class="method-grid">
      <div class="method-item">
        <span class="method-icon">ğŸ”</span>
        <div class="method-title">Hands-on testen</div>
        <div class="method-desc">Ik meld me aan, configureer en gebruik elke tool zelf. Geen herverpakte marketingteksten.</div>
      </div>
      <div class="method-item">
        <span class="method-icon">ğŸ’°</span>
        <div class="method-title">Actuele prijzen</div>
        <div class="method-desc">Alle prijzen worden periodiek gecontroleerd en bijgewerkt. Inclusief verborgen kosten.</div>
      </div>
      <div class="method-item">
        <span class="method-icon">ğŸ¯</span>
        <div class="method-title">Onafhankelijk advies</div>
        <div class="method-desc">Geen betaalde reviews of voorkeursposities. Mijn aanbevelingen zijn gebaseerd op kwaliteit.</div>
      </div>
    </div>
  </div>
</div>

{{/* ===== 5. ALLE ARTIKELEN ===== */}}
{{ $remainingPosts := after 4 $allPosts }}
{{ if $remainingPosts }}
<div class="section section-warm">
  <div class="container wide">
    <div class="section-title">
      <h2>Alle reviews & vergelijkingen</h2>
    </div>
    <div style="background:var(--bg);border:1px solid var(--border);border-radius:var(--radius);padding:0.5rem 1.25rem;">
      {{ range $remainingPosts }}
      <div class="article-row">
        {{ with .Params.categories }}{{ range first 1 . }}<a href="/categories/{{ . }}/" class="card-category">{{ . | humanize | title }}</a>{{ end }}{{ end }}
        <a href="{{ .RelPermalink }}" class="article-row-title">{{ .Title }}</a>
      </div>
      {{ end }}
    </div>
    <div style="text-align:center;margin-top:1.5rem;">
      <a href="/categories/" class="cta cta-outline">Bekijk alle categorieÃ«n</a>
    </div>
  </div>
</div>
{{ end }}

{{/* ===== 6. AUTEUR CTA ===== */}}
<div class="section">
  <div class="container" style="max-width:700px;">
    <div class="author-cta">
      <div class="author-cta-avatar">LV</div>
      <div class="author-cta-info">
        <h3>Over Lars de Vries</h3>
        <p>B2B software consultant met jarenlange ervaring. Ik help Nederlandse ondernemers de juiste software te kiezen â€” eerlijk, praktisch en zonder verkooppraatjes.</p>
        <a href="/about/" class="cta" style="margin:0;padding:0.5rem 1.25rem;font-size:0.9rem;">Meer over mij</a>
      </div>
    </div>
  </div>
</div>

{{ end }}
